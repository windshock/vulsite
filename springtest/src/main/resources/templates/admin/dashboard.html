<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header :: head"></head>
<body>
<nav th:replace="fragments/header :: nav"></nav>

<main class="container">
    <h2 style="color: #e94560; margin-bottom: 2rem;">관리자 대시보드</h2>

    <!-- 취약점 #8: 인증 없이 접근 가능 힌트 -->
    <div class="card" style="margin-bottom: 1rem; background-color: #0f3460;">
        <p style="color: #ffd700;">⚠️ 취약점: 이 페이지는 인증 없이 접근 가능합니다!</p>
        <p style="color: #4da6ff;">URL: /admin/dashboard 로 직접 접근 가능</p>
    </div>

    <div class="dashboard-grid">
        <div class="stat-card">
            <h3 th:text="${#lists.size(users)}">0</h3>
            <p>총 사용자 수</p>
        </div>
        <div class="stat-card">
            <h3 th:text="${#lists.size(boards)}">0</h3>
            <p>총 게시글 수</p>
        </div>
        <div class="stat-card">
            <h3 th:text="${#lists.size(files)}">0</h3>
            <p>총 파일 수</p>
        </div>
    </div>

    <!-- 취약점 #7: 평문 계정 정보 노출 -->
    <div class="card" style="margin-top: 2rem; background-color: #dc3545;">
        <h3 style="color: white;">⚠️ 관리자 계정 정보 (평문 노출!)</h3>
        <p style="color: white;">Username: <strong th:text="${adminUsername}"></strong></p>
        <p style="color: white;">Password: <strong th:text="${adminPassword}"></strong></p>
    </div>

    <h3 style="color: #e94560; margin-top: 2rem;">최근 사용자</h3>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>사용자명</th>
                <th>이메일</th>
                <th>가입일</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="user : ${users}">
                <td th:text="${user.id}"></td>
                <td th:text="${user.username}"></td>
                <td th:text="${user.email}"></td>
                <td th:text="${#temporals.format(user.createdAt, 'yyyy-MM-dd HH:mm')}"></td>
            </tr>
        </tbody>
    </table>

    <div style="margin-top: 2rem;">
        <a th:href="@{/admin/users}" class="btn">사용자 관리</a>
        <a th:href="@{/admin/config}" class="btn btn-secondary">설정</a>
    </div>
</main>

<footer th:replace="fragments/footer :: footer"></footer>
</body>
</html>
